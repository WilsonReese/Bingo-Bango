<div class="mt-4">
  <h1>Reservations</h1>
  <p>Current Time: <%= Time.current.strftime("%l:%M %p") %></p>

  <% if current_user == nil %>
    <p>Sign in to make a reservation</p>
  <% else %>
    <% if current_user.user_type == "standard" %>
      <%= link_to "New reservation", new_reservation_path %>

      <%# CURRENT RESERVATIONS%>
      <% if current_user.reservations.current.any? %>
        <h2>Current Reservation</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
          <% current_user.reservations.current.each do |reservation| %>
            <%= render reservation %>
          <% end %>
        </div>
      <% end %>

      <%# FUTURE RESERVATIONS %>
      <% if current_user.reservations.future.any? %>
        <h2>Upcoming Reservations</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
          <% current_user.reservations.future.each do |reservation| %>
            <%= render reservation %>
          <% end %>
        </div>
      <% end %>

      <%# PAST RESERVATIONS %>
      <% if current_user.reservations.past.any? %>
        <h2>Previous Reservations</h2>
        <div class="row row-cols-1 row-cols-md-3 g-4">
          <% current_user.reservations.past.each do |reservation| %>
            <%= render reservation %>
          <% end %>
        </div>
      <% end %>

    <% elsif current_user.user_type == "admin" %>
      <h3>Admin View</h2>
      <p>Approach:</p>
      <p>Make it like the new reservations thing, but instead of buttons it shows the name on the reservation</p>
      <p>Able to click into the reservation</p>

      <table class="table-calendar">
        <thead>
          <tr>
            <th>
              Theater
            </th>
            <th>
              Start DateTime
            </th>
            <th>
              End DateTime
            </th>
            <th>
              Link
            </th>
          </tr>
        </thead>
        <% @reservations.each do |reservation| %>
          <tr>
            <td>
              Theater <%= reservation.theater.id %>
            </td>
            <td>
              <%= reservation.start_time %>
            </td>
            <td>
              <%= reservation.end_time %>
            </td>
            <td>
              <%= button_to reservation, method: :delete %>
            </td>
          </tr>
        <% end %>
      </table>
    <% end %>
  <% end %>
</div>
